import java.util.Properties;
import java.io.*;

import Echo.TestHelper;
import Echo.Test;



public class EchoClient {
    public static void main(String args[])
    {
    	try {
            // Create and initialize orb
            org.omg.CORBA.ORB orb = 
                org.omg.CORBA.ORB.init(args, System.getProperties());

            // Get object reference
            org.omg.CORBA.Object obj = 
                // orb.string_to_object("corbaloc:iiop:1.2@dacha.hi.inet:1968/Test");
                // orb.string_to_object("corbaloc:iiop:1.2@fe80::221:70ff:fea2:63b4:1968/Test");
                orb.string_to_object("corbaloc:iiop:1.2@[::1]:1968/Test");
                //orb.string_to_object("corbaloc:iiop:1.2@127.0.0.1:1968/Test");
                //orb.string_to_object("corbaloc:iiop:1.2@10.95.28.47:1968/Test");
            Test refTest = TestHelper.narrow(obj);


            String message = "Hola mundo";
            for (int i=0; i < 10; i++) {
                String response = refTest.echo(message);
                System.out.println("[client] response = " + response);
            }
            
            System.exit(0);
    	}
    	catch (Exception e) {
            System.err.println("Main: Unexpected exception " + e.getMessage());
            e.printStackTrace();
            System.exit(1);
        }
    }
}
